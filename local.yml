# Run this playbook corresponding with `local` group of hosts
---
# - hosts: all
  # roles:
    # - debug
    # - name: Install role dependencies
      # command:
        # ansible-galaxy install --role-file requirements.yaml

- hosts: docker_hosts
  roles:
    - geerlingguy.docker

  # manually set distribution_major_version
  # workaround for debian buster (testing) bug
  # https://github.com/ansible/ansible/issues/19874#issuecomment-436542563
  vars:
    ansible_distribution_release: '{{ "buster" if ansible_facts["distribution_major_version"] == "buster/sid" else ansible_facts["distribution_release"] }}'
  pre_tasks:
    - name: Install apt_key prerequisites
      package:
        name: gnupg
        state: present
    - name: Display all variables/facts known for a host
      debug:
        var: hostvars[inventory_hostname]
        verbosity: 1
